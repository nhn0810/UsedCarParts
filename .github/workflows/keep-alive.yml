name: Supabase Keep Alive

on:
  schedule:
    # Run every day at 00:00 UTC (prevent 7-day pause)
    # You can change this to run more frequently if needed, e.g., '0 */12 * * *' for every 12 hours.
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Supabase URL
        # Replace USER_SUPABASE_URL_HERE with your actual Supabase Project URL if not using secrets.
        # Ideally, set SUPABASE_URL in GitHub Repository Secrets.
        # Creating a request to the REST API /health or just root will wake it.
        run: |
          if [ -z "${{ secrets.SUPABASE_URL }}" ]; then
            echo "URL secret not found, please configure SUPABASE_URL in GitHub Secrets or edit this file."
            # Example fallback (replace with your project url):
            # curl -I https://your-project-ref.supabase.co/rest/v1/
          else
            curl -I ${{ secrets.SUPABASE_URL }}/rest/v1/ \
              -H "apikey: ${{ secrets.SUPABASE_ANON_KEY }}"
          fi
